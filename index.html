<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Greentech Power Solutions - Solar Energy in Uttarakhand</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- ALL CSS STYLES ARE PLACED HERE -->
    <style>
        /* --- Brand Color Palette & Global Styles --- */
        :root {
            --brand-green: #6ECB43;
            --brand-orange: #F58634;
            --brand-blue: #0072BB;
            --dark-text: #2c3e50;
            --light-text: #ffffff;
            --background-light: #f9fafb;
            --background-white: #ffffff;
            --border-color: #e5e7eb;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }
        html { scroll-behavior: smooth; }
        body {
            font-family: 'Inter', sans-serif;
            line-height: 1.7;
            background-color: var(--background-light);
            color: var(--dark-text);
        }
        .container { max-width: 1200px; margin: auto; padding: 80px 20px; }
        .section-title {
            text-align: center;
            margin-bottom: 50px;
            font-size: 2.8rem;
            color: var(--brand-blue);
            font-weight: 700;
        }

        /* --- Header & Navigation --- */
        .header {
            background: var(--background-white);
            padding: 15px 0;
            border-bottom: 1px solid var(--border-color);
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
        }
        .nav {
            max-width: 1200px;
            margin: auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 20px;
        }
        .nav-logo img { height: 60px; width: auto; }
        .nav-links { list-style: none; display: flex; gap: 30px; }
        .nav-link a {
            text-decoration: none;
            color: var(--dark-text);
            font-weight: 600;
            padding: 5px 0;
            position: relative;
            transition: color 0.3s ease;
        }
        .nav-link a::after {
            content: '';
            position: absolute;
            width: 0;
            height: 2px;
            bottom: -5px;
            left: 50%;
            transform: translateX(-50%);
            background-color: var(--brand-orange);
            transition: width 0.3s ease;
        }
        .nav-link a:hover, .nav-link a.active { color: var(--brand-blue); }
        .nav-link a:hover::after, .nav-link a.active::after { width: 100%; }
        .nav-toggle { display: none; background: none; border: none; cursor: pointer; z-index: 1001; }
        .nav-toggle svg { width: 30px; height: 30px; }
        
        /* --- HERO BANNER --- */
        .hero {
            height: 90vh;
            background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url('22.jpg') no-repeat center center/cover;
            color: var(--light-text);
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
        }
        .hero-content {
            max-width: 800px;
            padding: 0 20px;
            animation: fadeIn 1.5s ease-in-out;
        }
        .hero-content h1 {
            font-size: 3.8rem;
            font-weight: 700;
            margin-bottom: 20px;
            text-shadow: 0 2px 8px rgba(0,0,0,0.5);
        }
        .hero-content p {
            font-size: 1.3rem;
            margin-bottom: 30px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.5);
        }
        .highlight { color: var(--brand-orange); }
        .cta-button {
            background: var(--brand-orange); color: var(--light-text); padding: 18px 40px; text-decoration: none;
            border-radius: 50px; font-weight: 600; font-size: 1.1rem; transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(245, 134, 52, 0.4); border: none; cursor: pointer; display: inline-block;
        }
        .cta-button:hover { transform: translateY(-3px); box-shadow: 0 8px 20px rgba(245, 134, 52, 0.6); }

        /* --- Services Section --- */
        .services-section { background-color: var(--background-white); }
        /* UPDATED RESPONSIVENESS */
        .services-grid { 
            display: grid; 
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); 
            gap: 30px; 
        }
        .service-card {
            background: var(--background-light); text-align: center; padding: 40px 20px; border-radius: 12px;
            border: 1px solid var(--border-color); transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .service-card:hover { transform: translateY(-5px); box-shadow: 0 10px 25px rgba(0,0,0,0.08); }
        .service-icon {
            background-color: var(--brand-blue); color: var(--light-text); width: 70px; height: 70px;
            border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 20px;
        }
        .service-icon svg { width: 32px; height: 32px; }
        .service-card h3 { font-size: 1.5rem; margin-bottom: 15px; color: var(--brand-blue); }
        .learn-more { color: var(--brand-blue); text-decoration: none; font-weight: 600; margin-top: 20px; display: inline-block; }

        /* --- NEW SLIDER SECTION --- */
        .slider-section {
            padding: 80px 0;
        }
        .slider-container {
            position: relative;
            max-width: 1000px;
            margin: auto;
            overflow: hidden;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        .slider {
            display: flex;
            transition: transform 0.5s ease-in-out;
        }
        .slide {
            min-width: 100%;
            position: relative;
        }
        .slide img {
            width: 100%;
            height: 600px;
            object-fit: cover;
            display: block;
        }
        .slider-btn {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background-color: rgba(255, 255, 255, 0.7);
            border: none;
            border-radius: 50%;
            width: 45px;
            height: 45px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        .slider-btn.prev { left: 15px; }
        .slider-btn.next { right: 15px; }
        .slider-btn svg { width: 24px; height: 24px; }
        .dots-container {
            text-align: center;
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
        }
        .dot {
            display: inline-block;
            width: 12px;
            height: 12px;
            margin: 0 5px;
            background-color: rgba(255, 255, 255, 0.6);
            border-radius: 50%;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }
        .dot.active {
            background-color: var(--brand-orange);
        }

        /* --- AI Savings Estimator Section --- */
        .ai-estimator { background-color: var(--background-white); }
        .estimator-container {
            display: grid; grid-template-columns: 1fr 1fr; gap: 40px; align-items: center;
            background: var(--brand-blue); color: var(--light-text); padding: 50px; border-radius: 12px;
        }
        .estimator-form label { display: block; margin-bottom: 8px; font-weight: 500; }
        .estimator-form input, .estimator-form select {
            width: 100%; padding: 12px; margin-bottom: 20px; border: 1px solid var(--border-color);
            border-radius: 8px; font-size: 1rem;
        }
        .estimator-button { width: 100%; background: var(--brand-orange); }
        #ai-response {
            background: rgba(255, 255, 255, 0.1); padding: 20px; border-radius: 8px; margin-top: 20px;
            white-space: pre-wrap; font-family: monospace; min-height: 100px;
        }

        /* --- AI Chat --- */
        .ai-chat-button {
            position: fixed; bottom: 30px; right: 30px; background: var(--brand-orange); color: var(--light-text);
            width: 60px; height: 60px; border-radius: 50%; border: none; cursor: pointer;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2); display: flex; align-items: center; justify-content: center;
            z-index: 999;
        }
        .chat-modal {
            display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%;
            background-color: rgba(0,0,0,0.5);
        }
        .chat-modal-content {
            background-color: var(--background-white); position: absolute; left: 50%; top: 50%;
            transform: translate(-50%, -50%); padding: 30px; border-radius: 12px; width: 90%; max-width: 500px;
        }
        .chat-close { float: right; font-size: 28px; font-weight: bold; cursor: pointer; }
        #chat-response { min-height: 80px; margin: 20px 0; }

        /* --- Footer --- */
        .footer {
            background-color: var(--dark-text); color: #bdc3c7; padding: 60px 20px; text-align: center;
        }
        .footer-logo img { height: 70px; margin-bottom: 20px; }
        .footer p { max-width: 600px; margin: 0 auto 20px; }
        .footer-contact { display: flex; justify-content: center; gap: 40px; margin: 30px 0; flex-wrap: wrap; text-align: left; }
        .contact-item { max-width: 280px; }
        .contact-item a { color: var(--brand-orange); text-decoration: none; }
        .footer .copyright { margin-top: 30px; border-top: 1px solid #34495e; padding-top: 20px; font-size: 0.9rem; }

        /* --- Responsive Design --- */
        @media (max-width: 992px) {
            /* .services-grid { grid-template-columns: 1fr 1fr; }  REMOVED for more fluid grid */
            .estimator-container { grid-template-columns: 1fr; }
        }
        @media (max-width: 768px) {
            .nav-links {
                position: fixed; top: 0; right: -100%; height: 100vh; width: 70%; max-width: 300px;
                background: var(--background-white); flex-direction: column; justify-content: center; align-items: center;
                gap: 40px; box-shadow: -5px 0 15px rgba(0,0,0,0.1); transition: right 0.4s ease-in-out; z-index: 1000;
            }
            .nav-links.nav-active { right: 0; }
            .nav-toggle { display: block; }
            .hero-content h1 { font-size: 2.8rem; }
            .section-title { font-size: 2.2rem; }
            /* .services-grid { grid-template-columns: 1fr; } REMOVED for more fluid grid */
            .footer-contact { flex-direction: column; align-items: center; text-align: center; gap: 20px; }
            .slide img { height: 400px; }
            .estimator-container { grid-template-columns: 1fr; }
        }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>
    
    <!-- Header -->
    <header class="header">
        <nav class="nav">
            <a href="index.html" class="nav-logo">
                <img src="7.png" alt="Greentech Power Solutions Logo">
            </a>
            <ul class="nav-links">
                <li class="nav-link"><a href="index.html" class="active">Home</a></li>
                <li class="nav-link"><a href="about.html">About Us</a></li>
                <li class="nav-link"><a href="services.html">Services</a></li>
                <li class="nav-link"><a href="projects.html">Projects</a></li>
                <li class="nav-link"><a href="contact.html">Contact</a></li>
            </ul>
            <button class="nav-toggle" aria-label="Open menu">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" />
                </svg>
            </button>
        </nav>
    </header>

    <main>
        <!-- Hero Section -->
        <section class="hero">
            <div class="hero-content">
                <h1>Illuminating Futures with <span class="highlight">Renewable Energy</span></h1>
                <p>Your trusted partner for top-quality solar solutions in Uttarakhand and beyond. Let's power a brighter, cleaner tomorrow together.</p>
                <a href="#services" class="cta-button">Explore Our Solutions</a>
            </div>
        </section>

        <!-- Services Section -->
        <section id="services" class="container services-section">
            <h2 class="section-title">Comprehensive Solar Solutions</h2>
            <div class="services-grid">
                <!-- Service Cards ... -->
                <div class="service-card">
                    <div class="service-icon"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M8.25 21v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21m0 0h4.5V3.545M12.75 21h7.5V10.75M2.25 21h1.5m18 0h-18M2.25 9l4.5-1.636M18.75 3l-1.5.545m0 6.205l3 1m1.5.5-1.5-.545M6 18l7.5-3.75m-7.5 2.25L13.5 18m0 0V9" /></svg></div>
                    <h3>Residential Solar</h3>
                    <p>Custom-designed rooftop systems to power your home, reduce your bills, and increase your property value.</p>
                    <a href="services.html" class="learn-more">Learn More &rarr;</a>
                </div>
                <div class="service-card">
                    <div class="service-icon"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 21h16.5M4.5 3h15M5.25 3v18m13.5-18v18M9 6.75h6M9 11.25h6m-6 4.5h6M6.75 21v-2.25a2.25 2.25 0 012.25-2.25h3a2.25 2.25 0 012.25 2.25V21M6.75 3v2.25a2.25 2.25 0 002.25 2.25h3a2.25 2.25 0 002.25-2.25V3" /></svg></div>
                    <h3>Commercial Solar</h3>
                    <p>Scalable energy solutions for businesses to cut operational costs and enhance their green credentials.</p>
                    <a href="services.html" class="learn-more">Learn More &rarr;</a>
                </div>
                <div class="service-card">
                    <div class="service-icon"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 18v-5.25m0 0a6.01 6.01 0 001.5-.189m-1.5.189a6.01 6.01 0 01-1.5-.189m3.75 7.478a12.06 12.06 0 01-4.5 0m3.75 2.311a7.5 7.5 0 01-7.5 0c-1.453 0-2.862.31-4.145.865a1.125 1.125 0 01-1.125-1.125V6.75A1.125 1.125 0 013 5.625h18a1.125 1.125 0 011.125 1.125v9.562a1.125 1.125 0 01-1.125 1.125c-1.283-.555-2.692-.865-4.145-.865z" /></svg></div>
                    <h3>O & M Services</h3>
                    <p>Expert maintenance for pre-installed solar plants to ensure long-term efficiency and optimal performance.</p>
                    <a href="services.html" class="learn-more">Learn More &rarr;</a>
                </div>
            </div>
        </section>

        <!-- NEW Slider Section (Replaces "Why Partner with Greentech?") -->
        <section class="slider-section">
            <h2 class="section-title">Our Recent Work</h2>
            <div class="slider-container">
                <div class="slider">
                    <!-- Slide 1 -->
                    <div class="slide">
                        <img src="1.jpg" alt="Solar panel installation in progress">
                    </div>
                    <!-- Slide 2 -->
                    <div class="slide">
                        <img src="2.jpg" alt="Finished solar panel array on a rooftop">
                    </div>
                    <!-- Slide 3 -->
                    <div class="slide">
                        <img src="3.jpg" alt="Large solar installation on a commercial building">
                    </div>
                    <!-- Slide 4 -->
                    <div class="slide">
                        <img src="4.jpg" alt="Technician working on solar panel framework">
                    </div>
                    <!-- Slide 5 -->
                    <div class="slide">
                        <img src="5.jpg" alt="Clean solar panels on a sunny day">
                    </div>
                    <!-- Slide 6 -->
                    <div class="slide">
                         <img src="6.jpg" alt="Solar panels with a mountain view">
                    </div>
                </div>
                <button class="slider-btn prev">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 19.5L8.25 12l7.5-7.5" /></svg>
                </button>
                <button class="slider-btn next">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M8.25 4.5l7.5 7.5-7.5 7.5" /></svg>
                </button>
                <div class="dots-container"></div>
            </div>
        </section>


        <!-- AI Savings Estimator Section -->
        <section class="container ai-estimator">
            <div class="estimator-container">
                <div class="estimator-text">
                    <h2>AI Savings Estimator</h2>
                    <p>Curious about how much you could save? Enter your details and let our AI provide a personalized savings estimate for your property.</p>
                </div>
                <div class="estimator-form">
                    <form id="savings-form">
                        <label for="bill">Average Monthly Electricity Bill (₹)</label>
                        <input type="number" id="bill" placeholder="e.g., 3000" required>
                        <label for="roof-type">Roof Type</label>
                        <select id="roof-type" required>
                            <option value="Concrete">Concrete / RCC</option>
                            <option value="Metal Sheet">Metal Sheet</option>
                            <option value="Tiled">Tiled</option>
                        </select>
                        <button type="submit" class="cta-button estimator-button">Calculate Savings</button>
                    </form>
                </div>
            </div>
            <div id="ai-response-container" style="display: none; margin-top: 20px;">
                <h4>Your Personalized Report:</h4>
                <div id="ai-response"></div>
            </div>
        </section>

        <!-- AI Chat Button and Modal... -->
         <button id="ai-chat-btn" class="ai-chat-button" aria-label="Open AI Expert Chat">
             <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M8.625 9.75a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0H8.25m4.125 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0H12m4.125 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0h-.375m-13.5 3.01c0 1.6 1.123 2.994 2.707 3.227 1.087.16 2.185.283 3.293.369V21l4.184-4.183a1.14 1.14 0 01.778-.332 48.294 48.294 0 005.83-.498c1.585-.233 2.708-1.626 2.708-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0012 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018z" /></svg>
        </button>
        <div id="chat-modal" class="chat-modal">
            <div class="chat-modal-content">
                <span id="chat-close-btn" class="chat-close">&times;</span>
                <h3>Ask Our AI Solar Expert</h3>
                <p>Have a question about solar energy? Type it below!</p>
                <form id="chat-form">
                    <input type="text" id="chat-question" placeholder="e.g., How long do solar panels last?" required style="width:100%; padding: 10px; margin: 10px 0; border-radius: 5px; border: 1px solid #ccc;">
                    <button type="submit" class="cta-button">Ask Question</button>
                </form>
                <div id="chat-response-container" style="display:none; margin-top: 20px;">
                    <h4>AI Response:</h4>
                    <div id="chat-response"></div>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-logo">
            <img src="7.png" alt="Greentech Power Solutions Logo">
        </div>
        <p>Illuminating Futures With Renewable Energy. Proudly serving our communities with top-quality solar installations and exceptional customer service.</p>
        <div class="footer-contact">
            <div class="contact-item">
                <strong>Address:</strong><br> Madhi Colony, Chaurash, Tehri Garhwal, Uttarakhand, India
            </div>
            <div class="contact-item">
                <strong>Contact:</strong><br> 
                <a href="tel:+919720716581">+91 9720716581</a><br>
                <a href="tel:+918126773275">+91 8126773275</a>
            </div>
            <div class="contact-item">
                <strong>Email:</strong><br> 
                <a href="mailto:solar@greentechpowersolutioncom.com">solar@greentechpowersolutioncom.com</a>
            </div>
        </div>
        <p class="copyright">&copy; 2025 Greentech Power Solutions. All Rights Reserved.</p>
    </footer>

<!-- ALL JAVASCRIPT IS PLACED HERE -->
<script>
    document.addEventListener('DOMContentLoaded', () => {
        // --- MOBILE MENU SCRIPT ---
        const navToggle = document.querySelector('.nav-toggle');
        const navLinks = document.querySelector('.nav-links');
        navToggle.addEventListener('click', () => {
            navLinks.classList.toggle('nav-active');
            if (navLinks.classList.contains('nav-active')) {
                navToggle.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" /></svg>`;
            } else {
                navToggle.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" /></svg>`;
            }
        });
        
        // --- NEW SLIDER SCRIPT ---
        const slider = document.querySelector('.slider');
        if (slider) {
            const slides = document.querySelectorAll('.slide');
            const prevBtn = document.querySelector('.slider-btn.prev');
            const nextBtn = document.querySelector('.slider-btn.next');
            const dotsContainer = document.querySelector('.dots-container');
            let currentSlide = 0;
            let slideInterval;

            const createDots = () => {
                slides.forEach((_, i) => {
                    dotsContainer.innerHTML += `<span class="dot" data-slide="${i}"></span>`;
                });
            };

            const activateDot = (slide) => {
                document.querySelectorAll('.dot').forEach(dot => dot.classList.remove('active'));
                document.querySelector(`.dot[data-slide="${slide}"]`).classList.add('active');
            };

            const goToSlide = (slide) => {
                slider.style.transform = `translateX(-${slide * 100}%)`;
                activateDot(slide);
                currentSlide = slide;
            };

            const nextSlide = () => {
                currentSlide = (currentSlide + 1) % slides.length;
                goToSlide(currentSlide);
            };

            const prevSlide = () => {
                currentSlide = (currentSlide - 1 + slides.length) % slides.length;
                goToSlide(currentSlide);
            };
            
            const startSlider = () => {
                slideInterval = setInterval(nextSlide, 5000); // Change slide every 5 seconds
            };
            
            const resetSliderInterval = () => {
                clearInterval(slideInterval);
                startSlider();
            };

            // Initialize
            createDots();
            goToSlide(0);
            startSlider();

            // Event Listeners
            nextBtn.addEventListener('click', () => {
                nextSlide();
                resetSliderInterval();
            });
            prevBtn.addEventListener('click', () => {
                prevSlide();
                resetSliderInterval();
            });
            dotsContainer.addEventListener('click', (e) => {
                if (e.target.classList.contains('dot')) {
                    const slide = Number(e.target.dataset.slide);
                    goToSlide(slide);
                    resetSliderInterval();
                }
            });
             // Swipe functionality for touch devices
            let touchstartX = 0;
            let touchendX = 0;

            slider.addEventListener('touchstart', e => {
                touchstartX = e.changedTouches[0].screenX;
            });

            slider.addEventListener('touchend', e => {
                touchendX = e.changedTouches[0].screenX;
                if (touchendX < touchstartX) nextSlide();
                if (touchendX > touchstartX) prevSlide();
                resetSliderInterval();
            });
        }


        // --- AI SAVINGS ESTIMATOR SCRIPT ---
        const savingsForm = document.getElementById('savings-form');
        const aiResponseContainer = document.getElementById('ai-response-container');
        const aiResponseDiv = document.getElementById('ai-response');

        savingsForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            const bill = document.getElementById('bill').value;
            const roofType = document.getElementById('roof-type').value;

            aiResponseDiv.textContent = 'Calculating your savings...';
            aiResponseContainer.style.display = 'block';

            const userPrompt = `As a solar energy expert for Greentech Power Solutions in Uttarakhand, India, create a personalized savings report for a potential customer with a monthly electricity bill of ₹${bill} and a ${roofType} roof. The report should be encouraging and concise (around 100 words). Include: 1. An estimated monthly savings percentage. 2. A recommended solar system size in kW. 3. An estimated payback period in years. Structure it clearly.`;
            
            try {
                const response = await callGeminiApi(userPrompt);
                aiResponseDiv.textContent = response;
            } catch (error) {
                console.error("AI Savings Estimator Error:", error);
                aiResponseDiv.textContent = 'Sorry, we couldn\'t calculate your savings at this time. Please try again later.';
            }
        });

        // --- AI CHATBOT SCRIPT ---
        const chatBtn = document.getElementById('ai-chat-btn');
        const chatModal = document.getElementById('chat-modal');
        const closeBtn = document.getElementById('chat-close-btn');
        const chatForm = document.getElementById('chat-form');
        const chatResponseContainer = document.getElementById('chat-response-container');
        const chatResponseDiv = document.getElementById('chat-response');

        chatBtn.addEventListener('click', () => { chatModal.style.display = 'block'; });
        closeBtn.addEventListener('click', () => { chatModal.style.display = 'none'; });
        window.addEventListener('click', (event) => { if (event.target == chatModal) { chatModal.style.display = 'none'; } });

        chatForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            const question = document.getElementById('chat-question').value;
            chatResponseDiv.textContent = 'Thinking...';
            chatResponseContainer.style.display = 'block';
            
            const userPrompt = `You are a friendly and helpful AI assistant for Greentech Power Solutions, a solar company. A customer has asked: "${question}". Answer their question concisely and accurately. If relevant, briefly mention that Greentech can help.`;

            try {
                const response = await callGeminiApi(userPrompt);
                chatResponseDiv.textContent = response;
            } catch (error) {
                console.error("AI Chatbot Error:", error);
                chatResponseDiv.textContent = 'Sorry, I am unable to answer at this moment. Please contact our team directly.';
            }
        });

        // --- COMMON GEMINI API CALL FUNCTION ---
        async function callGeminiApi(prompt) {
            
            // IMPORTANT NOTE FOR LOCAL TESTING:
            // Browser security (CORS) will block this API call if you open the index.html file directly.
            // To test this feature, you must run the files from a simple local web server.
            // One easy way is to use the "Live Server" extension in Visual Studio Code.
            // Another way (if you have Python) is to open a terminal in this folder and run:
            // python -m http.server
            // Then open http://localhost:8000 in your browser.

            const apiKey = ""; // Leave this empty
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;

            const payload = {
                contents: [{ parts: [{ text: prompt }] }],
            };

            const response = await fetch(apiUrl, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(payload)
            });

            if (!response.ok) {
                throw new Error(`API call failed with status: ${response.status}`);
            }

            const result = await response.json();
            
            const candidate = result.candidates?.[0];
            if (candidate && candidate.content?.parts?.[0]?.text) {
                return candidate.content.parts[0].text;
            } else {
                console.error("Invalid API response structure from Gemini:", result);
                if (candidate && candidate.finishReason) {
                    throw new Error(`Request failed due to: ${candidate.finishReason}`);
                }
                throw new Error("Could not parse the AI's response.");
            }
        }
    });
</script>

</body>
</html>

